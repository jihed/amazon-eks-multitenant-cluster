apiVersion: v1
kind: List
items:
- apiVersion: v1
  kind: Namespace
  metadata:
    name: team-a-apps-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
      environment: prod
    annotations:
      tenant-operator.kubernetes.io/version: v1
      team.kubernetes.io/name: team-a
      team.kubernetes.io/environment: prod
- apiVersion: v1
  kind: Namespace
  metadata:
    name: team-a-tools-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
      environment: prod
    annotations:
      tenant-operator.kubernetes.io/version: v1
      team.kubernetes.io/name: team-a
      team.kubernetes.io/environment: prod
- apiVersion: v1
  kind: ResourceQuota
  metadata:
    name: team-a-apps-prod-quota
    namespace: team-a-apps-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
    annotations:
      tenant-operator.kubernetes.io/version: v1
      team.kubernetes.io/resource-quota: 'true'
  spec:
    hard:
      cpu: '4'
      memory: '8Gi'
      pods: '20'
      services: '10'
      configmaps: '20'
      secrets: '20'
- apiVersion: v1
  kind: ResourceQuota
  metadata:
    name: team-a-tools-prod-quota
    namespace: team-a-tools-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
    annotations:
      tenant-operator.kubernetes.io/version: v1
      team.kubernetes.io/resource-quota: 'true'
  spec:
    hard:
      cpu: '4'
      memory: '8Gi'
      pods: '20'
      services: '10'
      configmaps: '20'
      secrets: '20'
- apiVersion: v1
  kind: LimitRange
  metadata:
    name: team-a-apps-prod-limits
    namespace: team-a-apps-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
    annotations:
      tenant-operator.kubernetes.io/version: v1
      team.kubernetes.io/limit-range: 'true'
  spec:
    limits:
    - type: Container
      default:
        cpu: '500m'
        memory: '512Mi'
      defaultRequest:
        cpu: '100m'
        memory: '128Mi'
      max:
        cpu: '2'
        memory: '2Gi'
- apiVersion: v1
  kind: LimitRange
  metadata:
    name: team-a-tools-prod-limits
    namespace: team-a-tools-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
    annotations:
      tenant-operator.kubernetes.io/version: v1
      team.kubernetes.io/limit-range: 'true'
  spec:
    limits:
    - type: Container
      default:
        cpu: '500m'
        memory: '512Mi'
      defaultRequest:
        cpu: '100m'
        memory: '128Mi'
      max:
        cpu: '2'
        memory: '2Gi'
- apiVersion: networking.k8s.io/v1
  kind: NetworkPolicy
  metadata:
    name: team-a-apps-prod-deny-all
    namespace: team-a-apps-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
      policy-type: deny-all
    annotations:
      tenant-operator.kubernetes.io/version: v1
      networkpolicy.kubernetes.io/description: Deny all ingress and egress traffic by default
  spec:
    podSelector: {}
    policyTypes:
    - Ingress
    - Egress
- apiVersion: networking.k8s.io/v1
  kind: NetworkPolicy
  metadata:
    name: team-a-tools-prod-deny-all
    namespace: team-a-tools-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
      policy-type: deny-all
    annotations:
      tenant-operator.kubernetes.io/version: v1
      networkpolicy.kubernetes.io/description: Deny all ingress and egress traffic by default
  spec:
    podSelector: {}
    policyTypes:
    - Ingress
    - Egress
- apiVersion: networking.k8s.io/v1
  kind: NetworkPolicy
  metadata:
    name: team-a-apps-prod-shared-services
    namespace: team-a-apps-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
      policy-type: shared-services
    annotations:
      tenant-operator.kubernetes.io/version: v1
      networkpolicy.kubernetes.io/description: Allow access to shared services and intra-tenant communication
  spec:
    podSelector: {}
    policyTypes:
    - Ingress
    - Egress
    ingress:
    - from:
      - namespaceSelector:
          matchLabels:
            team: team-a
            environment: prod
    egress:
    - to:
      - namespaceSelector:
          matchLabels:
            team: team-a
            environment: prod
    - to:
      - namespaceSelector:
          matchLabels:
            kubernetes.io/metadata.name: kube-system
      '':
      - port: 53
        protocol: UDP
      - port: 53
        protocol: TCP
    - to:
      - namespaceSelector:
          matchLabels:
            kubernetes.io/metadata.name: monitoring
      '':
      - port: 9090
        protocol: TCP
    - to:
      - namespaceSelector:
          matchLabels:
            kubernetes.io/metadata.name: logging
      '':
      - port: 24224
        protocol: TCP
- apiVersion: networking.k8s.io/v1
  kind: NetworkPolicy
  metadata:
    name: team-a-tools-prod-shared-services
    namespace: team-a-tools-prod
    labels:
      managed-by: kcl
      app.kubernetes.io/managed-by: kcl
      app.kubernetes.io/created-by: tenant-operator
      team: team-a
      policy-type: shared-services
    annotations:
      tenant-operator.kubernetes.io/version: v1
      networkpolicy.kubernetes.io/description: Allow access to shared services and intra-tenant communication
  spec:
    podSelector: {}
    policyTypes:
    - Ingress
    - Egress
    ingress:
    - from:
      - namespaceSelector:
          matchLabels:
            team: team-a
            environment: prod
    egress:
    - to:
      - namespaceSelector:
          matchLabels:
            team: team-a
            environment: prod
    - to:
      - namespaceSelector:
          matchLabels:
            kubernetes.io/metadata.name: kube-system
      '':
      - port: 53
        protocol: UDP
      - port: 53
        protocol: TCP
    - to:
      - namespaceSelector:
          matchLabels:
            kubernetes.io/metadata.name: monitoring
      '':
      - port: 9090
        protocol: TCP
    - to:
      - namespaceSelector:
          matchLabels:
            kubernetes.io/metadata.name: logging
      '':
      - port: 24224
        protocol: TCP
